<!DOCTYPE HTML>
<html>
<head>
<title>Forseti GNU</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
TD,P,B,INPUT,DIV{font-family: Arial, "Apple Chancery", "DejaVu Sans Mono", monospace; font-size:12pt}
.txtMenu{
	padding:4px;
	font-size:12pt;
	font-weight:normal;
	color:white;
	font-style: normal;
	text-decoration: none;
}
.txtSubMenu{
	padding:4px;
	font-size:12pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtPag{
	padding:4px;
	font-size:12pt;
	font-weight:normal;
	font-style: normal;
	text-decoration: none;
}
.txtEnlTit{
	padding:4px;
	font-size:14pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtTitLight{
	padding:4px;
	font-size:16pt;
	font-weight:lighter;
	font-style: normal;
	text-decoration: none;
}
.txtEnl{
	padding:4px;
	font-size:10pt;
	font-weight:normal;
	font-style: normal;
}
.txtTit{
	padding:4px;
	font-size:16pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtImp{
	padding:4px;
	font-size:12pt;
	font-weight:lighter;
	font-style: normal;
	text-decoration: none;
}
.txtPie{
	padding:4px;
	font-size:9pt;
	font-weight:normal;
	color:#FFFFFF;
	font-style: normal;
	
}

.txtTec{
	padding:4px;
	font-size:10pt;
	font-weight:normal;
	color:#FFFFFF;
	font-style: normal;
	text-decoration: none;
	
}
</style>
<script type="text/javascript"> //<![CDATA[ 
var tlJsHost = ((window.location.protocol == "https:") ? "https://secure.comodo.com/" : "http://www.trustlogo.com/");
document.write(unescape("%3Cscript src='" + tlJsHost + "trustlogo/javascript/trustlogo.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" rightmargin="0" bottommargin="0" marginwidth="0" marginheight="0">
<div align="center">
  <table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
    <tr> 
      <td height="20" align="right" valign="middle" bgcolor="#CCCCCC" class="txtTec"> 
        <a href="index.html" target="_self" class="txtTec">Inicio</a> | <a href="DONACIONES.html" target="_self" class="txtTec">Donaciones</a> 
        | <a href="SOF.html" target="_self" class="txtTec">Contacto</a></td>
    </tr>
    <tr> 
      <td class="txtEnlTit"><table width="100%" border="0" cellspacing="5" cellpadding="0">
          <tr>
            <td width="100" align="center"><img src="../forsetidoc/IMG/logo_forseti.jpg" width="90" height="80"></td>
            <td align="right"><img src="../forsetidoc/IMG/el-erp-gratuito-para-pymes.gif" width="700" height="80"></td>
          </tr>
        </table>
        
      </td>
    </tr>
    <tr> 
      <td>
          <table width="100%"  border="0" cellspacing="0" cellpadding="0">
            <tr> 
			
              <td height="30" align="center" valign="middle" bgcolor="#999999"><a class="txtMenu" href="010001.html" target="_self">Generalidades</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#888888"><a class="txtMenu" href="020101.html" target="_self">Implantaci&oacute;n</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#999999"><a class="txtMenu" href="030101.html" target="_self">Interfaz</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#FF6600"><a class="txtMenu" href="040101.html" target="_self">SAF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#0099FF"><a class="txtMenu" href="050101.html" target="_self">CEF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#FFCC00"><a class="txtMenu" href="060101.html" target="_self">REF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#339933"><a class="txtMenu" href="070101.html" target="_self">SOF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#888888"><a class="txtMenu" href="080101.html" target="_self">Anexos</a></td>
			

             
               </tr>
			   <tr>
			    <td height="10">&nbsp;</td>
			   </tr>
          </table>
      </td>
    </tr>
    <tr> 
      <td>
	  
	    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
			<td width="150" valign="top"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
                 
              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040101.html" class="txtSubMenu" target="_self"><font color="#FF6600">Introducción</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040201.html" class="txtSubMenu" target="_self"><font color="#FF6600">Administración</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040301.html" class="txtSubMenu" target="_self"><font color="#FF6600">Registros</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040401.html" class="txtSubMenu" target="_self"><font color="#FF6600">Reportes</font></a></td>
				 </tr>
				 

				</table>
				
              <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr> 
                  <td><br>
                    Motores del proyecto Forseti<br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/gnulinux.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/postgresql.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/openjdk.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/tomcat.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/openssl.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/rsync.gif" width="150" height="50"></td>
                </tr>
              </table>
			</td>
			<td valign="top">
				<table width="100%" border="0" cellspacing="0" cellpadding="10">
				  
				  <tr>
					<td class="txtTit" align="center"><font color="#FF6600">Control SSL</font></td>
				  </tr>
				  <tr>
					<td> 
                     				 				 				 				<p>Este módulo está desarrollado para que sea mas fácil la generación de certificados digitales para el transporte cifrado de la información entre el navegador web del usuario y el servidor forseti. Para entender lo que hace este módulo, es muy recomendable leer la página de ayuda del menú <strong>Implantación/Configuración/JSSE</strong> de esta documentación. Aquí se explica solo la interacción con el módulo y no se profundiza en lo que es JSSE como en esta otra sección. En este módulo vamos a administrar los certificados auto-firmados así como el servicio tomcat para proveer seguridad a nuestro servidor.</p>Los paneles izquierdo, inferior y derecho de este módulo aparecen vacíos porque no se utilizan.<p>El panel de cuerpo principal de este módulo no contiene columnas, simplemente muestra los archivos de almacén de certificados que hemos generado a través de este mismo módulo. Estos archivos se guardan en el directorio bin de nuestra instalación forseti.</p><br /><div align="center"><span style="font-size: medium;"><strong><span style="font-size: large;">Procesos del módulo de Control JSSE</span><br /></strong></span></div><p>En este módulo intervienen los procesos primarios de consultas de certificado, certificado auto-firmado, instalación del certificado y agregado a jssecacerts.<br /></p><strong>Consultar certificado.</strong><br /><br />Permite ver las propiedades del certificado del archivo de almacén seleccionado de la lista. Este proceso solicita primero la contraseña del almacén del certificado y en caso de ser correcta, mostrará la información del certificado auto-firmado. El formulario para la consulta posee el siguiente objeto:<br /><ul> <li><div align="justify"><strong>Contraseña.</strong> Indica aquí la contraseña de este almacén.</div></li></ul><p><strong>Certificado auto-firmado.</strong></p><p>Permite generar un nuevo certificado auto-firmado. El formulario para la generación contiene los siguientes objetos:</p><ul> <li><strong>Nombre del archivo,</strong> Es el nombre que tendrá el almacén del certificado. Todos los nombres comienzan con forsetikeystoreXYZ para identificar que este es un almacén, y donde XYZ puede ser algo significativo para identificar este archivo en especial.</li> <li><strong>Alias,</strong> Este puede ser forseti o cualquier otro alias. Este se utiliza para identificar un certificado dentro de un almacén. Como este proceso no genera múltiples certificados por almacén, es fácil recordar el alias.<br /></li> <li><strong>Nombre común,</strong> Es el nombre del emisor del certificado, debe ser alguno de los siguientes: El dominio o la IP del servidor, por ejemplo "empresa.com.mx" o "54.209.221.45". Este nombre es muy importante que coincida con alguno de los nombres alternativos si es que se va a utilizar el servicio JPacConn para sellar CFDIs del mismo servidor (por medio de localhost o 127.0.0.1) o de servidores forseti externos por medio de (empresa.com.mx o 54.209.221.45).<br /></li> <li><strong>Unidad organizativa,</strong> Puede ser el nombre del departamento de tu empresa encargada de generar certificados.<br /></li> <li><strong>Organización,</strong> Puede ser el nombre de tu empresa.<br /></li> <li><strong>Localidad,</strong> La localidad o entidad federativa.<br /></li> <li><strong>Estado,</strong> El estado o provincia.<br /></li> <li><strong>Código de País,</strong> Para México puede ser mx.<br /></li> <li><strong>Nombres alternativos,</strong> Estos deben estar antepuestos por las siglas dns: o ip: separados por coma. Un ejemplo de una linea de nombres alternativos según el nombre común anterior es: <span style="color: rgb(0, 0, 255);">dns:empresa.com.mx,ip:54.209.221.45,ip:127.0.0.1,dns:localhost</span><br /></li> <li><strong>Contraseña,</strong> Es la contraseña del almacén y del certificado.<br /></li> <li><strong>Confirmación de contraseña,</strong> Su confirmación.<br /></li></ul><strong>NOTA:</strong> Por medio de éste módulo los certificados se generan con una vigencia de tres meses a partir del momento de generación. Si se desea aumentar la vigencia de los certificados así como hacer otros cambios, entonces se deberán generar manualmente con el comando keytool. <br /><p><strong>Instalar certificado.</strong></p><p>Permite instalar  en tomcat, el certificado del almacén seleccionado de la lista. El formulario para la instalación del certificado contiene los siguientes objetos:<br /></p><ul> <li><strong>Contraseña,</strong> Es la contraseña del almacén y el certificado generado.</li> <li><strong>Puerto,</strong> Este puede ser 8443 o 443. Es el puerto donde deseas que escuche el servicio web tomcat por peticiones cifradas. Para que se pueda instalar sobre el puerto 443 ( Puerto natural reconocido por el protocolo https ), tomcat debe estar previamente configurado, de lo contrario, solo se podrá instalar en el puerto 8443 ( Puerto por defecto de tomcat para escuchar por peticiones cifradas ). Las diferencias en este tema son tratadas en la página <strong>Implantación/Configuración/Configurando Forseti</strong> de esta documentación.<br /></li></ul><p><br /><span style="font-size: medium;"><strong>NOTA MUY IMPORTANTE: </strong>Para que esto sea posible, el mismo proceso tomcat debe tener acceso a modificar el archivo de configuración server.xml de la misma instalación tomcat. Los servidores utilizados en una red de área local o en instalaciones en la nube para usos privados ( donde el servidor no usa un domino como empresa.com.mx ) </span><span style="font-size: medium;">y donde forseti sea la única aplicación que contendrá tomcat, podrían enfrentar los riesgos que esto implica, sin embargo, en instalaciones públicas que dan servicio de out-sourcing se vuelve indispensable, ética y físicamente, impedir el acceso al archivo server.xml e instalar manualmente certificados comprados a una autoridad certificadora ( CA ) como VerySign.</span></p><p><strong>Agregar a jssecacerts.</strong><br /></p><p>El formulario para el registro del certificado contiene los siguientes objetos:<br /></p><ul> <li><strong>Contraseña,</strong> Es la contraseña del almacén <strong>jssecacerts</strong> de JSSE que contiene los certificados de confianza. Si no sabes cual es, intenta con "changeit" que es la contraseña por defecto, pero cámbiala al finalizar el registro ( verifica la página de ayuda del menú Implantación/Configuración/JSSE de esta documentación. ) <br /></li> <li><strong>Puerto,</strong> Este puede ser 8443 o 443. Es el puerto donde deseas que escuche el servicio JPacConn.</li></ul><p>El servicio JPacConn es el encargado de gestionar el sellado de Comprobantes Fiscales Digitales por Internet, mejor conocidos como CFDIs. El proceso de sellar un documento involucra los siguientes pasos: <br /></p><ol> <li>Se genera el CFD desde el módulo de Ventas, Nómina o Traspasos de almacén (Carta Porte). Este proceso arma el archivo inicial xml con su cadena original y sella el comprobante.<br /><br /></li> <li>Se conecta al servidor donde escucha el servicio JPacConn.<br /><br /></li> <li>Se envía al servicio JPacConn el CFD y otros elementos ( ID de servidor, Contraseña, etc. ).<br /><br /></li> <li>Este servicio recibe la petición, y verifica el ID de servidor, la contraseña etc.<br /><br /></li> <li>Si no pasa la verificación, registra, regresa un archivo XML de error al servidor que le habló, se cierra la conexión, y finalmente el módulo de Ventas, Nómina o Traspasos también registra el error.<br /><br /></li> <li>De lo contrario, manda el CFD recibido al PAC ( Por ahora solo soporta el PAC Edicom porque distribuye su API como software libre, sin embargo se están desarrollando APIs para soportar otros PACs ), y espera para recibir el CFD timbrado, osea el CFDI final.<br /><br /></li> <li>Registra el sello, regresa una copia del CFDI al servidor que le habló, y se cierra la conexión.<br /><br /></li> <li>Finalmente, el módulo de Ventas, Nomina o Traspasos genera el archivo PDF del CFDI recibido y guarda ambos archivos para poder ser descargados. </li></ol><p>Todos los servidores forseti cuentan con el servicio JPacConn, y si se tiene una cuenta dada de alta con el PAC, entonces este servidor forseti puede utilizarlo para sellar comprobantes mandados desde los módulos de Ventas, Nóminas y Traspasos, no solo desde este mismo servidor, sino también, mandados desde los módulos de Ventas, Nóminas y Traspasos de servidores forseti externos que no tengan una cuenta con el PAC.</p><p>El servicio JPacConn escucha por peticiones https exclusivamente, suponiendo que un servidor está instalado en la nube sobre la IP 54.209.221.45, la conexión del segundo paso debe ser realizada de dos maneras distintas según sea el caso:</p><p><strong>1) Conexión al servicio desde el mismo servidor,</strong> Esta debe ser realizada por medio de <strong>https://localhost</strong> o con la dirección interna <strong>https://127.0.0.1</strong>, asignando el puerto explícitamente ya sea <strong>8443</strong> o <strong>443</strong> si se configuró tomcat para soportarlo.<br /></p><p><strong>2) Conexión al servicio desde un servidor externo,</strong> Esta debe ser realizada por medio de <strong>https://54.209.221.45</strong>, asignando el puerto explícitamente ya sea <strong>8443</strong> o <strong>443</strong> si se configuró tomcat para soportarlo, en el servidor que brinda el servicio.</p><p> Cualquiera de ambas conexiones solo involucran a las aplicaciones ( conexión desde una máquina virtual de java a otra ) y no al navegador. Por lo tanto, esta situación requiere que el certificado del servidor que brinda el servicio, sea registrado en un archivo de almacén llamado jssecacerts para que pueda ser reconocido como confiable, por la aplicación cliente ( la que realiza la petición ), y este proceso se encarga de esta tarea.</p><p><strong>NOTA:</strong> Teóricamente, no será necesario el registro si el servidor está utilizando un certificado comprado a una autoridad certificadora ( CA ).<br /></p><br /><div align="center"><span style="font-size: large;"><span style="font-size: large;"><span style="font-size: large;"><strong>Errores comunes en este módulo</strong></span></span></span></div><p><strong><br />PRECAUCION: La variable TOMCAT (ruta de instalación de tomcat) no está definida... No se puede realizar este proceso.</strong> Es necesario que se configure la ruta de instalación de TOMCAT. Para esto, es necesario hacerlo en las propiedades del servidor del menú administración / servidor y empresas. <br /></p><p><strong>PRECAUCION: La variable JVM (ruta de instalación del OpenJDK o Java JDK) no está definida... No se puede </strong><strong><strong>realizar este proceso</strong>.</strong> Es necesario que se configure la ruta de instalación de la Máquina Virtual de Java. Para esto, es necesario hacerlo en las propiedades del servidor del menú administración / servidor y empresas. </p> 							  			  			  			  			  
                    </td>
				  </tr>
				  <tr>
					<td height="10">&nbsp;</td>
				  </tr>
				  

				</table>
			</td>
			<td width="220" valign="top"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
			    <tr>
				    
                  <td colspan="2">P&aacute;ginas en este tema:</td>
				 </tr>
                
				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040201.html" class="txtPag" target="_self"><font color="#FF6600">Servidor y Empresas</font></a><br><font color="#999999">Detalles del módulo administrativo del servidor y sus empresas</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040202.html" class="txtPag" target="_self"><font color="#FF6600">Documentación de Ayuda</font></a><br><font color="#999999">Introducción del módulo de la documentación de ayuda para el sistema Forseti</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="04020201.html" class="txtPag" target="_self"><font color="#FF6600">Menús principales</font></a><br><font color="#999999">Detalles del móudolo de menús principales para la documentación de ayuda</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="04020202.html" class="txtPag" target="_self"><font color="#FF6600">Menús secundarios</font></a><br><font color="#999999">Detalles del móudolo de menús secundarios para la documentación de ayuda</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="04020203.html" class="txtPag" target="_self"><font color="#FF6600">Páginas de Ayuda</font></a><br><font color="#999999">Detalles del móudolo de páginas de ayuda</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040203.html" class="txtPag" target="_self"><font color="#FF6600">Control SSL</font></a><br><font color="#999999">Módulo del control de certificados digitales utilizados en el servicio tomcat</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040204.html" class="txtPag" target="_self"><font color="#FF6600">Administración de Roles</font></a><br><font color="#999999">Módulo para la gestón de roles de usuarios y sus permisos dentro del SAF</font></td>
				 </tr>
				

			    <tr>
			      <td colspan="2">
				<script language="JavaScript" type="text/javascript">
				  TrustLogo("http://forseti.org.mx/comodo_secure_113x59_white.png", "CL1", "none");
				</script>
				<a  href="https://www.positivessl.com/" id="comodoTL">Positive SSL</a>
			      </td>
			   </td>
			</table>
			
			</td>
		  </tr>
		</table>

	  
	  </td>
    </tr>
    <tr> 
      <td bgcolor="#999999" height="40" valign="bottom" class="txtPie"><a href="AGPL.html" target="_self" class="txtPie">Licencia Pública General de Affero (AGPL)</a> | <a href="acerca" target="_self" class="txtPie">Sobre 
        Forseti</a><br>
        Derechos Reservados &copy; 2014 - 2015 Organización Forseti A.C.
      </td>
    </tr>
  </table>
</div>
</body>
</html>

