<!DOCTYPE HTML>
<html>
<head>
<title>Forseti GNU</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
TD,P,B,INPUT,DIV{font-family: Arial, "Apple Chancery", "DejaVu Sans Mono", monospace; font-size:12pt}
.txtMenu{
	padding:4px;
	font-size:12pt;
	font-weight:normal;
	color:white;
	font-style: normal;
	text-decoration: none;
}
.txtSubMenu{
	padding:4px;
	font-size:12pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtPag{
	padding:4px;
	font-size:12pt;
	font-weight:normal;
	font-style: normal;
	text-decoration: none;
}
.txtEnlTit{
	padding:4px;
	font-size:14pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtTitLight{
	padding:4px;
	font-size:16pt;
	font-weight:lighter;
	font-style: normal;
	text-decoration: none;
}
.txtEnl{
	padding:4px;
	font-size:10pt;
	font-weight:normal;
	font-style: normal;
}
.txtTit{
	padding:4px;
	font-size:16pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtImp{
	padding:4px;
	font-size:12pt;
	font-weight:lighter;
	font-style: normal;
	text-decoration: none;
}
.txtPie{
	padding:4px;
	font-size:9pt;
	font-weight:normal;
	color:#FFFFFF;
	font-style: normal;
	
}

.txtTec{
	padding:4px;
	font-size:10pt;
	font-weight:normal;
	color:#FFFFFF;
	font-style: normal;
	text-decoration: none;
	
}
</style>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" rightmargin="0" bottommargin="0" marginwidth="0" marginheight="0">
<div align="center">
  <table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
    <tr> 
      <td height="20" align="right" valign="middle" bgcolor="#CCCCCC" class="txtTec"> 
        <a href="index.html" target="_self" class="txtTec">Inicio</a> | <a href="DONACIONES.html" target="_self" class="txtTec">Donaciones</a> 
        | <a href="SOF.html" target="_self" class="txtTec">Contacto</a></td>
    </tr>
    <tr> 
      <td class="txtEnlTit"><table width="100%" border="0" cellspacing="5" cellpadding="0">
          <tr>
            <td width="100" align="center"><img src="../forsetidoc/IMG/logo_forseti.jpg" width="90" height="80"></td>
            <td align="right"><img src="../forsetidoc/IMG/el-erp-gratuito-para-pymes.gif" width="700" height="80"></td>
          </tr>
        </table>
        
      </td>
    </tr>
    <tr> 
      <td>
          <table width="100%"  border="0" cellspacing="0" cellpadding="0">
            <tr> 
			
              <td height="30" align="center" valign="middle" bgcolor="#999999"><a class="txtMenu" href="010001.html" target="_self">Generalidades</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#888888"><a class="txtMenu" href="020101.html" target="_self">Implantaci&oacute;n</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#999999"><a class="txtMenu" href="030101.html" target="_self">Interfaz</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#FF6600"><a class="txtMenu" href="040101.html" target="_self">SAF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#0099FF"><a class="txtMenu" href="050101.html" target="_self">CEF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#FFCC00"><a class="txtMenu" href="060101.html" target="_self">REF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#339933"><a class="txtMenu" href="070101.html" target="_self">SOF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#888888"><a class="txtMenu" href="080101.html" target="_self">Anexos</a></td>
			

             
               </tr>
			   <tr>
			    <td height="10">&nbsp;</td>
			   </tr>
          </table>
      </td>
    </tr>
    <tr> 
      <td>
	  
	    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
			<td width="150" valign="top"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
                 
              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040101.html" class="txtSubMenu" target="_self"><font color="#FF6600">Introducción</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040201.html" class="txtSubMenu" target="_self"><font color="#FF6600">Administración</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#FF6600">-</font></td>
                    <td valign="top"><a href="040301.html" class="txtSubMenu" target="_self"><font color="#FF6600">Registros</font></a></td>
				 </tr>
				 

				</table>
				
              <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr> 
                  <td><br>
                    Motores del proyecto Forseti<br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/gnulinux.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/postgresql.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/openjdk.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/tomcat.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/openssl.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/rsync.gif" width="150" height="50"></td>
                </tr>
              </table>
			</td>
			<td valign="top">
				<table width="100%" border="0" cellspacing="0" cellpadding="10">
				  
				  <tr>
					<td class="txtTit" align="center"><font color="#FF6600">Servidor y Empresas</font></td>
				  </tr>
				  <tr>
					<td> 
                    
 
				
 
				 				 				 				 				 				 				 				 				 				

<div align="justify"> 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 				 							El módulo administrativo de Servidor y Empresas del SAF te permite controlar:<br />
<ul> <li>La configuración de propiedades del servidor</li> <li>Las actualizaciones del mismo</li> <li>Las propiedades de las empresas</li> <li>Los respaldos y restauración de empresas individuales</li> <li>El desarrollo de reportes y gráficas para el mismo SAF o para empresas del CEF</li>
</ul>Los paneles Izquierdo, Derecho e Inferior aparecen vacíos porque este módulo no los utiliza.</div>
<p>Las columnas por defecto que muestra el panel de cuerpo principal de este módulo son la siguientes:</p>
<div align="justify">
<ul> <li>
<strong>Clave.</strong> Es el identificador de la base de datos. Este, se debe ingresar al registro de inicio de sesión en el CEF.<br />
</li> <li>
<strong>Fecha.</strong> Fecha de creación de la base de datos.<br />
</li> <li>
<strong>Usuario.</strong> Usuario de PostgreSQL, dueño de la base de datos.<br />
</li> <li>
<strong>Nombre.</strong> Es el nombre de la empresa o persona física.<br />
</li> <li>
<strong>Correo.</strong> Correo electrónico del contacto. Este correo es utilizado como remitente para el envío automático.<br />
</li> <li>
<strong>Web.</strong> Página web de la empresa o persona física.<br />
</li> <li>
<strong>Dirección.</strong> Dirección de la empresa o persona física registrada<br />
</li> <li>
<strong>Población.</strong> Su población.<br />
</li> <li>
<strong>CP.</strong> Su código postal.</li>
</ul>
<strong>NOTA:</strong> Las bases de datos activas y en un estado congruente, siempre aparecen en color negro, mientras que todas las que contienen errores o están corruptas dentro del servidor aparecen en color rojo.</div>
<h2 align="center">
<a id="PROC">
<strong>Procesos del Módulo de Servidor y Empresas</strong></a>
</h2>
<p align="justify">En el módulo de Servidor y Empresas, intervienen los procesos primarios de propiedades del servidor, actualizar servidor, agregar empresa, cambiar propiedades, eliminar empresa, respaldar empresa, restaurar empresa y generar reporte.</p>
<p><br />
</p>
<div align="left">
<strong>1 .- Propiedades del Servidor.</strong><br />
</div><br />
Permite establecer algunas de las propiedades de este servidor, las cuales se dividen en Generales, Automatización de tareas, Datos del servidor JPacConn, Datos del Proveedor Autorizado de Certificación y Datos del servidor SMTP.<br />
<br />
<strong>Generales:</strong><br />
Estas propiedades engloban configuraciones generales que necesita el servidor para hacer tareas básicas para agregar empresas, eliminarlas, respaldarlas, actualizar el servidor y otras. Los datos que hay que configurar aquí, se muestran a continuación:<br />
<ul> <li>
<strong>Ruta de Instalacion de TOMCAT</strong>, Es donde quedó instalado el servidor web Tomcat7. En distribuciones basadas en Ubuntu por lo general se instala en "/var/lib/tomcat7". &nbsp;&nbsp;&nbsp; </li> <li>
<strong>Ruta del OpenJDK o Java JDK</strong>, Es donde quedó instalada la Máquina Virtual de Java, que utilizada por tomcat y la aplicación forseti.</li> <li>Nombre de este servidor, Un nombre común para identificar este servidor ante las terminales que se conecten a el. Si se es proveedor del servicio de Out-Sourcing, este nombre debería hacer referencia a tu negocio. &nbsp;&nbsp;&nbsp; </li> <li>
<strong>URL de revisión y descarga de actualizaciones forseti</strong>, Es la URL de algún servidor que contenga las actualizaciones de forseti. Estas se publican en la página oficial del proyecto, forseti.org.mx, en la sección SOF. &nbsp;&nbsp;&nbsp; </li> <li>
<strong>Contraseña de fsi</strong>, Esta es muy importante. fsi es el usuario administrativo del SAF, fsi puede hacer todo, y absolutamente todo dentro del SAF, por lo tanto, se debería proporcionar una contraseña bastante fuerte y cambiarse regularmente. Se sugiere no usar este usuario para ninguna tarea, por el contrario, se debería dar de alta un rol administrativo y asignarle los permisos necesarios. <strong>NOTA MUY IMPORTANTE</strong>: Si se deja en blanco esta contraseña, no se cambiará.</li> <li>
<strong>Infraestructura PostgreSQL</strong>, Esta debe ser Local o Segundo Servidor, AWS RDS se utilizaba en el pasado para infraestructuras de base de datos montadas en el servicio Amazon Relational Database Systems. Este campo indicaba al servidor ejecutar o no, respaldos de servidor al nivel de bases de datos. Como en una infraestructura RDS los respaldos se generan por el servicio,  en caso de estar seleccionado, el servidor forseti no generaba respaldos de todo el servidor. Hoy en día, esto no tiene efecto ya que se generan respaldo aún sobre infraestructuras RDS, y solo se proporciona para compatibilidad hacia atrás. </li> <li>
<strong>Ruta de Respaldos</strong>, Es la ruta donde se guardarán los archivos ZIP de los respaldos generados de todo el servidor, o de las bases de datos individuales.</li>
</ul>
<strong>Automatizacion de Tareas</strong>:<br />
El gestor de tareas automáticas, permite al servidor forseti, ejecutar procesos programados diariamente. Estos, son procesos del servidor y de cada empresa instalada que se pueden realizar manualmente, pero que si se olvidan por largo tiempo, podrían traer tanto resultados inesperados en las empresas, como resultados funestos si por ejemplo, se cayera el servidor. Dentro de estas tareas, se realizan los procesos de actualización del servidor, respaldos completos y actualizaciones de saldos y otros de cada empresa instalada. <br />
<ul> <li>
<strong>Hora de comienzo de procesos</strong>, Es la hora a la que se ejecutará el gestor de tareas automáticas. Esta debe estar en formato <strong>hh:mm</strong> de 24 hrs, por ejemplo, 13:10 para la una de la tarde con diez minutos. La hora, la toma del reloj del servidor web y ésta debería ser una hora en la cual el servidor forseti tenga la menor carga de trabajo posible, ya que estos procesos pueden alentar bastante el servicio.</li> <li>
<strong>Revisión de actualizaciones disponibles</strong>, Bandera para marcar si es que se desea que el gestor ejecute el proceso de actualización de versión del servidor. </li> <li>
<strong>Respaldos</strong>, Bandera para marcar si es que se requieren respaldos diarios automáticos de todo el servidor. <strong>NOTA</strong>: Los respaldos de todo el servidor solo se pueden realizar desde el gestor de tareas, y no manualmente como si se puede con los respaldos de bases de datos individuales.</li> <li>
<strong>Actualización de saldos y otros, en todas las empresas,</strong> Bandera para indicar si se desea realizar la actualización de saldos, existencias y otras actualizaciones que se necesitan realizar en cada empresa instalada en el servidor.Véase el CEF para mayor información sobre lo que son estas actualizaciones.<br />
</li>
</ul>
<strong>NOTA</strong>: Los cambios de esta sección solo se reflejan al reiniciar el servidor.<br />
<br />
<strong>Datos del servidor JPacConn para timbrado de comprobantes</strong>:<br />
Forseti permite el timbrado de comprobantes fiscales digitales a través del PAC Edicom. Para ello, se ha desarrollado una API basada en REST llamada JPacConn que va incluida en el servidor forseti. Esta API, permite que tanto el servidor local como servidores forseti ajenos, se conecten a ella y le manden Comprobantes Fiscales Digitales (CFD). Una vez recibido, la API mandará el CFD al PAC Edicom para ser timbrado, esperará la respuesta en la que tiene que recibir el CFDI final, y lo regresará al servidor forseti local o al externo para que éste, continúe con el proceso de generación del archivo PDF. Distintos servidores forseti de Out-Sourcing, pueden tener su API activa para que gente que no tenga cuenta con Edicom, y que utilice forseti como su sistema empresarial, pueda aún timbrar sus facturas y demás comprobantes. En el proyecto SOF de la página oficial forseti.org.mx se publican servidores certificados por el desarrollador con la API activa.<br />
La API, gestiona una base de datos de los servidores forseti que tienen permiso para su consumo. Esta base de datos debe incluso contener un registro del servidor local, de lo contrario, no se podrá consumir localmente. Cada registro contiene el uuid del servidor, el usuario y la contraseña. Para conectarte a una API activa necesitas configurar la conexión a ella:<br />
<ul> <li>
<strong>URL de conexión a la API JPacConn</strong>, Es la IP o nombre de dominio, con número de puerto explícito, en la que escucha la API. Por ejemplo, si la API utilizada para timbrar se encuentra activa en el mismo servidor forseti, la URL debería ser localhost:443 o localhost:8443 dependiendo de la configuración de tomcat. Para utilizar APIs de otro servidor forseti, la ruta podría ser el dominio o la IP pública del servicio, por ejemplo, empresa-de-out-sourcing-forseti.com:443 o 54.244.95.209:443. &nbsp; </li> <li>
<strong>ID de este servidor, para Timbrar en un servicio de JPacConn</strong>, Es el identificador de nuestro servidor, en el estándar de la Open Software Foundation (OSF) para computación distribuida, UUID (universally unique identifier).&nbsp; </li> <li>
<strong>Usuario para el JPacConn</strong>, El usuario de nuestra cuenta<br />
</li> <li>
<strong>Contraseña para el JPacConn</strong>, La contraseña de nuestra cuenta. <strong>NOTA MUY IMPORTANTE</strong>: Si se deja en blanco esta contraseña, no se cambiará.</li>
</ul>
<strong>Datos del Proveedor Autorizado de Certificación (si y solo si este servidor es una API activa)</strong><br />
En caso de que este servidor forseti, sea un proveedor del servicio de Out-Sourcing,&nbsp; o sea utilizado para tus propias empresas, y deseas tener una cuenta propia con el PAC Edicom para el timbrado de todos los CFDs de éstas, tendrás&nbsp; configurar tu cuenta con el PAC:&nbsp; <br />
<ul> <li>
<strong>URL de conexion al Proveedor</strong>, Es la dirección o dominio donde escucha el servicio web para timbrado de comprobantes del PAC Edicom.</li> <li>
<strong>Usuario para el Proveedor</strong>, El usuario de tu cuenta con Edicom.</li> <li>
<strong>Contraseña para el Proveedor. </strong>La contraseña de tu cuenta con Edicom. <strong>NOTA MUY IMPORTANTE</strong>: Si se deja en blanco esta contraseña, no se cambiará.</li>
</ul><br />
<strong>Datos del servidor SMTP para el envío de correos electrónicos por JavaMail:<br />
</strong>Forseti, permite el envío de correos automáticos a través de la API JavaMail, a un servidor SMTP (Simple Mail Transfer Protocol), que es, el que definitivamente manda el correo. Por ejemplo, cuando se genera una factura electrónica, se puede enviar al correo registrado en los datos del cliente. De igual manera, al generar un recibo de nómina electrónico, se enviará al empleado. Forseti, utiliza el correo electrónico registrado de la empresa que está solicitando el servicio, como remitente del mensaje. Para que esto sea posible, es necesario tener una cuenta activa en un servidor SMTP. Existen servidores SMTP públicos como Amazon SES, o puedes configurarte el tuyo propio (lo cual esta fuera del alcance de esta documentación). Los datos de configuración se muestran a continuación:<br />
<ul> <li>
<strong>URL de conexión al servidor SMTP,</strong> IP o Dominio del servidor SMTP al cual nos vamos a conectar. Por ejemplo, para Amazon SES, puede ser email-smtp.us-east-1.amazonaws.com</li> <li>
<strong>Puerto, </strong>Por lo regular los servidores SMTP escuchan sobre el puerto 25 &nbsp; </li> <li>
<strong>Usuario</strong>, El usuario de nuestra cuenta.</li> <li>
<strong>Contraseña, </strong>La contraseña de nuestra cuenta. <strong>NOTA MUY IMPORTANTE</strong>: Si se deja en blanco esta contraseña, no se cambiará.</li>
</ul><br />
<strong>2 .- Actualizar Servidor.<br />
<br />
</strong>Al ejecutar este proceso, el servidor primero verifica si existen actualizaciones disponibles. Este proceso usa el URL configurado en las propiedades del servidor, y en caso de que este servidor demuestre estar en su última versión, el proceso terminará en este punto. De lo contrario, descargará todos los archivos de actualización necesarios para dejar este servidor en la última versión disponible, y los ejecutará uno por uno. Por ejemplo, si la versión del servidor es la 4.0.7, y hubieran disponibles las revisiones 8, 9 y 10, se instalará primero la actualización 4.0.8. Al finalizar, proseguirá con la instalación de la actualización 4.0.9, y al finalizar ésta, con la 4.0.10, y en este punto finalizará el proceso. Como cada una de las actualizaciones puede quedar inconclusa (por fallas en la luz etc.), durante el proceso crítico de la actualización, el servidor se pone en un estado inestable "Actualizando", el cual no permite que alguien se registre en el CEF. Aparte, se rigen por un archivo el cual contiene el status de cada actualización, para que así, se pueda reiniciar la actualización desde el punto en el que se quedó, justo antes de la falla eléctrica, y así, regresar al servidor a un estado estable. Las actualizaciones se pueden llevar a cabo de manera manual (este proceso) y/o de manera automática, configurándola en las propiedades del servidor. Es muy importante revisar el archivo de registro de la actualización para poder controlar algún error que pudiera presentarse durante el proceso. Cada actualización, actúa primero sobre cada base de datos de empresas instaladas, y al finalizar, sobre la base de datos principal FORSETI_ADMIN. Es por esto, que las actualizaciones pueden tardar un tiempo considerable antes de finalizar, sobre todo, cuando no se ha actualizado el servidor en un período de tiempo razonablemente largo.<br />
<br />
<br />
<strong>3 .- Agregar Empresa.</strong><br />
<br />
Permite dar de alta empresas en este servidor. Cada empresa actúa como una base de datos independiente en el servidor PostgreSQL y maneja algunos archivos de configuración. La estructura para la creación de la base de datos la toma del archivo de sistema .forseti_inibd alojado en la instalación forseti. El formulario para la creación de una empresa incluye:<br />
<ul> <li>
<strong>Nombre</strong>, Es un nombre corto con el patrón "[A-Z]{4,20}" (de 4 a 20 caracteres máximo, de la A a la Z en mayúsculas), para identificar el registro de la empresa o persona física. Este mismo nombre, pero en minúsculas, será el usuario registrado en PostgreSQL dueño de la base de datos, lo cual quiere decir, que será el usuario administrativo de la empresa en el CEF.</li> <li>
<strong>Nombre o Razón Social</strong>, Nombre real de la empresa o la persona física. Este nombre se utiliza para el nombre del Emisor en comprobantes fiscales digitales, y para otros procesos. </li> <li>
<strong>Dirección &nbsp;</strong>&nbsp; </li> <li>
<strong>Población</strong> &nbsp;&nbsp;&nbsp; </li> <li>
<strong>Código Postal</strong> &nbsp;&nbsp;&nbsp; </li> <li>
<strong>Correo Electrónico</strong>, el cual se utilizará como remitente de correos enviados por el servicio JavaMail, en caso de que forseti tenga una cuenta en un servidor SMTP. &nbsp;&nbsp;&nbsp; </li> <li>
<strong>Página Web</strong>, La página de la empresa o persona física. &nbsp;&nbsp; </li> <li>
<strong>Contraseña</strong>, Es la clave que se utilizará para el usuario administrativo del CEF y para acceso a la base de datos.&nbsp; </li> <li>
<strong>Confirmación de Contraseña</strong>, Debes confirmar la contraseña anterior.&nbsp; <br />
</li>
</ul>
<strong><br />
4 .- Cambiar Propiedades.</strong><br />
<br />
Permite cambiar los datos de la empresa registrada en el SAF. Se pueden cambiar todos los datos excepto el               <strong>Nombre corto</strong> para identificar el registro de la empresa o persona física porque este campo es el nombre de la base de datos en el servidor.<br />
Una de las principales causas de cambio, es el mantener la contraseña del dueño de la base de datos (Usuario con el mismo nombre que Nombre corto) segura, actualizandola periódicamente.<br />
<br />
<strong>5 .- Eliminar empresa.</strong><br />
<br />
Te permite eliminar la empresa seleccionada. Esto eliminará toda y absolutamente toda la base de datos y los archivos de configuración que fueron generados al agregar la empresa. <strong>NOTA:</strong> Es una buena idea respaldar una empresa justo antes de eliminarla, porque los datos de la empresa ya no se pueden recuperar a menos que se tenga el respaldo. Es importante saber que el respaldo completo de servidor no funciona para recuperar empresas individuales. <br />
<br />
<strong>6 .- Respaldar empresa.</strong><br />
<br />
Permite respaldar la empresa seleccionada de la lista. Los respaldos se realizan como archivos comprimidos en ZIP y se guardan en la <strong>Ruta de Respaldos</strong> que fué configurada en las Propiedades del Servidor. Esta ruta debe apuntar a un medio independiente como por ejemplo a un disco duro externo, a otra máquina en la red, o a un medio de respaldo en la nube como un servicio de "Amazon Web Services S3".<br />
Los archivos ZIP generados contendrán la estructura y los datos depositados en la base de datos, y los archivos alternos a esta base de datos que usa la empresa respaldada para poder ser operada. <strong>NOTA:</strong> Este proceso solo respalda bases de datos individuales y sirven para la recuperación de la empresa a un estado anterior en el tiempo. Este proceso NO sirve y no está enfocado para respaldar todo el servidor, para eso, se necesita establecer la bandera de Respaldos del gestor de tareas. Una vez esté activa esta bandera, los respaldos se llevarán a cabo a la hora en que haya establecido el gestor. <br />
<br />
<strong>7 .- Restaurar empresa.</strong><br />
<br />
Este proceso se utiliza para la recuperación de empresas a un estado anterior en el tiempo. El formulario para restauración incluye:<br />
<ul> <li>
<strong>Mostrar respaldos con fecha mayor o igual a</strong>, Es la fecha a partir de cuando deseas ver respaldos (inclusive).<br />
</li> <li>
<strong>De la empresa:</strong> La empresa de la cual deseas ver sus respaldos.<br />
</li> <li>
<strong>Selecciona el archivo de respaldo</strong>, Si existen respaldos de esta empresa con esta fecha o posterior, aparecen en esta lista. Debes entonces seleccionar el archivo que deseas recuperar. Estos se muestran con el patron de fecha y hora del respaldo. "FSIBD_[NOMBRE]-AAAA-MM-DD-hh-mm.zip", donde [NOMBRE] es el nombre corto de la base de datos, AAAA es el año, MM el mes, DD el día, hh la hora y mm los minutos en que se relizó este respaldo.<br />
</li> <li>
<strong>Restaurar como,</strong> Debes seleccionar el nuevo Nombre corto para esta base de datos.<br />
</li> <li>
<strong>Contraseña,</strong> La contraseña del dueño de esta base de datos. NOTA: Esta contraseña no se refiere a la contraseña de la base de datos del respaldo, sino a la contraseña que tendrá la nueva base de datos a recuperar.<br />
</li> <li>
<strong>Confirmación de contraseña.</strong><br />
</li>
</ul> <strong>NOTA:</strong> Si se intenta recuperar una empresa eliminada accidentalmente, primero se debe crear una nueva empresa con el nombre de la eliminada. Entonces, el sistema ya podrá mostrar los respaldos de ésta y asi proceder a la recuperación y por último, se elimina la empresa creada para que no ocupe más espacio.<br />
<br />
En el caso que no se tuviera un respaldo específico de esta empresa, se debe extraer manualmente del respaldo del servidor (del archivo "FORSETI_ADMIN-AAAA-MM-DD-hh-mm.zip"). Una vez extraído, se necesitará comprimir este directorio en ZIP con el mismo nombre ( FSIBD_[NOMBRE]-AAAA-MM-DD-hh-mm.zip ) e ingresarlo a la ruta de respaldos. Entonces ya tenemos el respaldo y ya podemos restaurar la empresa eliminada de la manera indicada en la nota anterior.&nbsp; <br />
<br />
La restauración de servidores completos se lleva a cabo cuando hay una falla en el disco del servidor y otras situaciones desastrozas donde se pierde toda o parte de la información. Para recuperar un servidor completo, es estrictamente necesario seguir los siguientes pasos:<br />
<br />
<ol> <li>Copiar el archivo "FORSETI_ADMIN-AAAA-MM-DD-hh-mm.zip" a una ruta en el nuevo servidor. Esta puede ser el directorio personal.<br />
<br />
</li> <li>Hacer la instalación de forseti en el servidor ( Para la instalación, ver sección de Implantación en esta documentación ) <strong>de la misma versión y revisión del respaldo.<br />
<br />
</strong>
</li> <li>Ya instalado, hacer dueño&nbsp; del respaldo a tomcat7 para que el proceso tomcat pueda leerlo. Por ejemplo, si el respaldo se llama FORSETI_ADMIN-2014-10-30-23-17.zip, y se encuentra en la ruta /home/ubuntu/respaldo, desde la terminal debes ejecutar lo siguiente:<br />
<br />
<span style="color: rgb(0, 0, 255);">$ sudo chown tomcat7 /home/ubuntu/respaldo/FORSETI_ADMIN-2014-10-30-23-17.zip</span><br />
<br />
</li> <li>Iniciar el SAF y proporcionar los datos de conexión a la base de datos, la ruta del respaldo que en este caso es "/home/ubuntu/respaldo/FORSETI_ADMIN-2014-10-30-23-17.zip" y la ruta donde está instalado tomcat ( En servidores ubuntu por lo regular será "/var/lib/tomcat7" ).<br />
<br />
</li> <li>Aceptar y esperar a que termine el proceso el cual se puede llevar varios minutos o incluso horas.<br />
<br />
</li> <li>    Ya terminado este proceso, se podrá accesar al SAF y a cada empresa del CEF como normalmente se venía haciendo.</li>
</ol>
<strong><br />
7 .- Generar Reporte.<br />
<br />
</strong>Este proceso permite agregar reportes definidos por el usuario a una empresa del CEF en particular o reportes del mismo SAF. Los reportes definidos por el usuario deben ser creados por personas capacitadas porque requieren la comprensión del estándar SQL ( Structured Query Language ) entendida en español como Lenguaje de Consulta Estructurado, la cual identifica a un tipo de lenguaje vinculado con la gestión de bases de datos de carácter relacional. <strong>NOTA MUY IMPORTANTE</strong>: Alguien que no sabe bien como funciona SQL puede dañar severamente el servidor porque en este módulo se pueden ejecutar sentencias SQL arbitrariamente. Es indispensable saber lo que se está haciendo antes de dar permisos a alguien a crear reportes.<br />
<br />
Suponiendo que vamos a conectarnos a una empresa del CEF, veamos algunas sentencias SQL ...<strong><br />
<br />
</strong>
<span style="color: rgb(0, 0, 255);">select id_entidadventa as clave, descripcion, cast('2014-10-27' as timestamp) as fecha<br />
from tbl_ventas_entidades<br />
order by id_entidadventa asc;</span>
<strong><br />
<br />
</strong>Esta primer sentencia extrae la clave y la descripción de los puntos de venta de la empresa, y genera una columna extra de tipo "fecha" con el valor 27 de octubre de 2014.<strong><br />
<br />
</strong>
<span style="color: rgb(0, 0, 255);">select 'TOTALES:' as totales, coalesce(sum(subtotal), 0.0) as subtotal, coalesce(sum(iva), 0.0) as iva, coalesce(sum(total), 0.0) as total<br />
from tbl_ventas_facturas_cab<br />
where status &lt;&gt; 'C' and fecha = '2014-10-27';</span>
<strong><br />
<br />
</strong>Esta segunda sentencia genera una sola fila de resultados que suma el subtotal, el iva y el total de todas las facturas del 27 de octubre del 2014 que no están canceladas, y pertenecientes a todas las entidades. Esta es un acumulado de ventas de la sentencia anterior.<strong><br />
<br />
</strong>
<span style="color: rgb(0, 0, 255);">select f.numero, coalesce(c.nombre,'Venta de Mostrador') as nombre, f.subtotal, f.iva, f.total<br />
from tbl_ventas_facturas_cab f left outer join tbl_client_client c<br />
&nbsp; on f.id_clipro = c.id_clave<br />
where f.status &lt;&gt; 'C' and f.fecha = '2014-10-27' and f.id_entidad = 1;</span>
<strong><br />
<br />
</strong>Esta tercera sentencia extrae el número, nombre del cliente (o mostrador en caso de que no haya cliente), subtotal, iva y total de cada factura del 27 de octubre de 2014, de la entidad de venta numero 1. Esta consulta es un segundo nivel de la primer sentencia y pertenece a la primera línea de los resultados de las entidades la cual tiene una clave de "1".<strong><br />
<br />
</strong>
<span style="color: rgb(0, 0, 255);">select coalesce(sum(subtotal), 0.0) as subtotal, coalesce(sum(iva), 0.0) as iva, coalesce(sum(total), 0.0) as total<br />
from tbl_ventas_facturas_cab <br />
where status &lt;&gt; 'C' and fecha = '2014-10-27' and id_entidad = 1;</span>
<strong><br />
&nbsp;<br />
</strong>Esta cuarta sentencia genera una sola fila de resultados que suma el subtotal, el iva y el total de todas las facturas del 27 de octubre del 2014 que no están canceladas, y pertenecientes a la primera entidad. Esta es un acumulado de ventas de la sentencia anterior.<strong><br />
<br />
</strong>Para ingresar estas consultas al sistema dentro de un reporte del CEF, debemos generar una nueva estructura que enlace este código SQL, para ello, debemos primero entender la interfaz de generación de reportes la cual se explica a continuación.<br />
<br />
Cuando presionamos el botón de "Generar Reporte", nos abre un diálogo que contiene la siguiente información:<strong><br />
</strong>
<ul> <li>
<strong>Base de datos de salida,</strong> Es la base de datos a la cual le vamos a generar el reporte. Esta debemos seleccionarla desde el módulo de servidor y empresas. Si no seleccionamos ninguna empresa, se generará el reporte sobre la base de datos principal FORSETI_ADMIN.<br />
<br />
</li> <li>
<strong>ID del Nuevo Reporte,</strong> Es el identificador del reporte que vamos a generar. Los IDs para cualquier base de datos, incluso la base de datos principal FORSETI_ADMIN deben ser enteros mayores a 10000 porque los números menores a este, están reservados para posibles reportes de sistema incluidos en actualizaciones futuras. Este campo puede dejarse en cero si lo que se desea es cambiar un reporte de usuario existente.<br />
<br />
</li> <li>
<strong>Selecciona un reporte para cambiarlo o usarlo como plantilla,</strong> esta opción muestra una lista de los reportes tanto de sistema como definidos por el usuario, pertenecientes a la base de datos seleccionada. Si no está seleccionado un reporte de esta lista, se generará un reporte nuevo desde cero, de lo contrario, el reporte seleccionado se cambiará o se utilizará como plantilla para un nuevo reporte. <strong>NOTA:</strong> Los reportes de sistema no se pueden cambiar. </li>
</ul>Una vez seleccionado el ID del reporte y aceptando, un diálogo se abrirá con todo lo necesario para trabajar con nuestras sentencias SQL anteriores. Ya que este diálogo es extenso y difícil de explicar, vamos a analizarlo por pasos.<br />
<strong><br />
1) Cabecero del reporte.<br />
<br />
</strong>Este cabecero contiene información de como y donde se va a visualizar el reporte:<strong><br />
</strong>
<ul> <li>
<strong>ID de reporte,</strong> Es el id que asignamos en la pantalla anterior.<br />
<br />
</li> <li>
<strong>Tipo y nombre corto,</strong> El tipo se refiere al módulo al cual pertenecerá este reporte. Por ejemplo, para nuestra consulta, este puede ir en la sección de "CLIENTES" o "FACTURAS", osea que será un reporte del módulo de "VENTAS" submódulo de "CLIENTES" o "FACTURAS" del CEF. <strong>NOTA:</strong> El acceso a los reportes solo depende del permiso hacia el reporte mismo y no del permiso hacia el módulo del reporte, en otras palabras, si alguien tiene negado el permiso al módulo de facturación, pero tiene acceso a un reporte de facturas, SI podrá cargar el reporte. El nombre corto se usa para identificar el reporte por una clave Alfanumérica.<br />
<br />
</li> <li>
<strong>Descripción,</strong> La descripción del reporte.<br />
<br />
</li> <li>
<strong>Salida del código a la pantalla,</strong> Si se selecciona, al aceptar no se ingresa el reporte, solo se muestra la estructura completa del mismo tal y como se ingresaría en el caso de hacerlo manualmente a través de un cliente SQL para PostgreSQL como psql. Esto sirve para resolver problemas de sintaxis y otros problemas en la estructura del reporte.<br />
<br />
</li> <li>
<strong>Este reporte permite graficar,</strong> Si se selecciona, se podrán imprimir gráficas de este reporte. NOTA: No todos las reportes son aptos para gráficas ya que para ello, se necesita una estructura especial la cual se explica mas adelante.<br />
<br />
</li> <li>
<strong>Ventana Horizontal,</strong> Es la dimensión horizontal en píxeles que ocupará la ventana emergente del navegador para visualizar el reporte en pantalla.<br />
<br />
</li> <li>
<strong>Ventana Vertical,</strong> Esta es la dimensión vertical de la misma.<br />
<br />
</li> <li>
<strong>Titulo, Encabezados, Detalles y Acumulados,</strong> Son las tipografías, tamaños y estilos que tendrán estos elementos en el reporte. El título es la descripción del reporte, los encabezados son los nombres de columnas de las consultas SQL, los detalles son los datos que contienen estas columnas y los acumulados son un tipo especial de consulta que se usa para sumar datos relacionados al nivel, como nuestra segunda y cuarta sentencia.</li>
</ul>
<strong>2) Tablas y Columnas.<br />
<br />
</strong>Aquí se muestran los objetos que contiene la base de datos, estos objetos residen en la empresa o la base de datos principal FORSETI_ADMIN según se esté generando un reporte del SAF o uno del CEF. Al seleccionar un objeto en el cuadro de "Tablas", el cuadro de "Columnas" mostrará las columnas en las que están contenidos los datos de este objeto. Esto se provee con la intención de que el desarrollador conozca la estructura de los datos para diseñar el reporte.<br />
Explicar los datos que contiene cada una de las columnas de cada objeto, está fuera del alcance de esta documentación, sin embargo los objetos y sus columnas ( con algunas excepciones ) se han nombrado de una manera que sea intuitiva para el desarrollador. Por ejemplo, inician con un nombre que puede ser "tbl" o "view" para distinguir entre tablas y vistas, seguido del módulo como "ventas" el submódulo "facturas" y el tipo como "cab" o "det", la tabla "tbl_ventas_facturas_cab" contiene los cabeceros de las facturas, mientras que la tabla "tbl_ventas_facturas_det" contiene el detalle o conceptos de la factura.<strong><br />
<br />
3) Área de consultas para la formación del reporte.<br />
<br />
</strong>Los reportes en forseti se pueden estructurar en tres niveles, esto quiere decir que por cada linea del reporte de un primer nivel, se puede generar otra consulta de segundo nivel que enlaza a la linea del primer nivel, y por cada linea de este segundo nivel se puede generar una tercera consulta que enlaza a la linea del segundo nivel. Además, cada nivel puede contener una linea extra que pertenece a su acumulado. Veamos esto en un ejemplo. El reporte de puntos de venta al cual aplicamos las consultas anteriores contiene dos niveles con sus acumulados y se ve de la siguiente manera:<br />
<p align="center">
<img alt="fig4.2.1.1.png" src="../forsetidoc/IMG/fig4.2.1.1.png" style="border:0px solid;margin:0px;" /><br />
<br />
<strong>Figura 4.2.1.1.</strong> Reporte de dos niveles con acumulados en ambos niveles.<br />
</p>En la estructura de diseño de cada reporte, por cada uno de los tres niveles tenemos los siguientes campos:<ul> <li>
<strong>Tabulador,</strong> Es el margen en porcentaje que tendrán los datos del nivel ya sea en la impresión o en la pantalla.<br />
<br />
</li> <li>
<strong>Código principal,</strong> Es el código fuente del nivel en el estándar SQL, que utilizará cuando se cargue el reporte.<br />
<br />
</li> <li>
<strong>Probar,</strong> Al presionar este botón, el código fuente principal y el de acumulados se ejecutará, y las columnas de las consultas aparecerán inmediatamente abajo del cuadro del código de cada una. <strong>NOTA:</strong> Si no se ha especificado código para acumulados simplemente lo ignorará, pero si esto es igual en el código principal del nivel a probar, la ejecución de la consulta marcará error.<br />
<br />
</li> <li>
<strong>Tabulador de acumulados,</strong> Es el margen en porcentaje que tendrán los datos de acumulados del nivel.<br />
<br />
</li> <li>
<strong>Código de acumulados,</strong> Es el código fuente para datos de acumulados. Este código es opcional mientras exista su código principal. Sin embargo no se debe generar si su código principal no existe<span style="color: rgb(0, 0, 255);">
</span>
</li>
</ul>
<p>Para hacer clara la explicación de como funciona esta estructura, vamos a basarnos en el reporte anterior que maneja las cuatro sentencias anteriormente descritas. <br />
<br />
<strong>Para el nivel uno,</strong> el <strong>Tabulador</strong> esta establecido en cero % lo cual no establece ningún margen <strong>NOTA:</strong> Los elementos del primer nivel del ejemplo (Encabezados y Datos), muestran un pequeño margen porque están dentro de su espacio de impresión, alineados al centro. Esto se explica en la siguiente sección. El código de <strong>Código principal</strong> en este nivel se configura de la siguiente manera:<br />
<br />
<span style="color: rgb(0, 0, 255);">select id_entidadventa as clave, descripcion, cast('[fecha]' as timestamp) as fecha<br />
from tbl_ventas_entidades<br />
order by id_entidadventa asc;</span>
<strong><br />
<br />
</strong>La expresión [fecha] se maneja como una variable en forseti y construirá un filtro de esta expresión al cargar el reporte, por ejemplo, al cargar este reporte, se genera el filtro donde te pedirá que selecciones la fecha desde un calendario emergente. Suponiendo que seleccionas el 28 de octubre de 2014, entonces la sentencia a ejecutar sustituirá [fecha] por 2014-10-28. Se pueden agregar N cantidad de expresiones de fecha, enteras, decimales, alfanuméricas, etc, las cuales aparecerán en el filtro del reporte a cargar. Por ejemplo, si agregáramos a nuestra sentencia una clausula where quedando de la siguiente manera:</p>
<p> <span style="color: rgb(0, 0, 255);">select id_entidadventa as clave, descripcion, cast('[fecha]' as timestamp) as fecha<br />
from tbl_ventas_entidades<br />
where id_entidadventa between [entidadini] and [entidadfin]<br />
order by id_entidadventa asc;</span>
<strong><br />
</strong>
</p>
<p>Entonces, ahora al cargar el reporte, se generará el filtro con tres expresiones: fecha, entidadini y entidadfin, donde entidadini es un dato entero del numero inicial de la entidad a cargar y entidadfin es también un entero del número de la entidad final, entonces, si seleccionamos 1 como entidadini y 4 como entidadfin, en los resultados nos excluirán las entidades 6, 7, 9, 10 y 12 del reporte. <br />
</p>
<p>Todas las expresiones deben ir encerradas entre corchetes ("[nombre]"), y todas las expresiones del <strong>Código principal</strong> del primer nivel serán las que funcionarán como variables para la configuración del filtro cada vez que carguemos el reporte.<br />
</p>
<p>Durante el diseño, podemos probar los resultados de alguna consulta presionando el botón de <strong>Probar</strong>, suponiendo que nuestra primer sentencia ya incluye la expresión [fecha], entonces al probar, nos arrojará un campo para que incluyamos el valor de la variable fecha. <strong>NOTA</strong>: En pruebas de cualquier nivel, las variables se establecen manualmente y no generan ventanas emergentes de calendario, catálogos etc., como si se hace al cargar reportes finalizados. <br />
</p>
<p>El <strong>Tabulador de acumulados</strong> del primer nivel esta establecido también en cero % lo cual no establece ningún margen <strong>NOTA:</strong> El elemento Total de la sentencia de acumulados del primer nivel del ejemplo se muestra dentro de su espacio de impresión que tiene un valor del 70%, alineado a la derecha, es por eso que pareciera tener un tabulador enorme, pero no es así. El código de <strong>Código de acumulados</strong> en este nivel se configura de la siguiente manera:<br />
</p>
<p>
<span style="color: rgb(0, 0, 255);">select 'TOTALES:' as totales, coalesce(sum(subtotal), 0.0) as subtotal, coalesce(sum(iva), 0.0) as iva, coalesce(sum(total), 0.0) as total<br />
from tbl_ventas_facturas_cab<br />
where status &lt;&gt; 'C' and fecha = '[fecha]';</span>
<strong><br />
</strong>
</p>
<p>Al igual que en el código principal, para el acumulado de primer nivel la expresión [fecha] será sustituida por la variable del filtro, sin embargo, las expresiones de esta sentencia no generan variables para la configuración del filtro. Dicho de otra manera, si no existiera la expresión [fecha] en el código principal de primer nivel, esta expresión no sería sustituida por ninguna fecha y marcaría error de sintaxis al cargar el reporte. Recordemos que los filtros son exclusivamente generados por las expresiones que existen en el código principal del primer nivel. Si modificáramos el código principal e incluyéramos la sentencia "where" anterior, igualmente tendríamos que incluirla en este acumulado y nos quedaría de la siguiente manera:</p>
<p>
<span style="color: rgb(0, 0, 255);">select 'TOTALES:' as totales, coalesce(sum(subtotal), 0.0) as subtotal, coalesce(sum(iva), 0.0) as iva, coalesce(sum(total), 0.0) as total<br />
from tbl_ventas_facturas_cab<br />
where status &lt;&gt; 'C' and fecha = '[fecha]' and </span>
<span style="color: rgb(0, 0, 255);">
<span style="color: rgb(0, 0, 255);">id_entidad between [entidadini] and [entidadfin]</span>;</span>
<strong><br />
</strong>
</p>
<p>De no hacerlo, no nos marcaría error, sin embargo nos sumaría todos los totales de todas las entidades lo cual resultaría en un informe erróneo. El código de acumulados de primer nivel es la última sentencia en ejecutarse en los reportes.<br />
</p>
<p>
<strong>Para el nivel dos,</strong> el <strong>Tabulador</strong> esta establecido en 10 % lo cual ahora si establece un margen y su primer elemento "numero" tiene un porcentaje de 10 % alineado al centro de este espacio. El código de <strong>Código principal</strong> en este nivel se configura de la siguiente manera:<br />
</p>
<p>
<span style="color: rgb(0, 0, 255);">select f.numero, coalesce(c.nombre,'Venta de Mostrador') as nombre, f.subtotal, f.iva, f.total<br />
from tbl_ventas_facturas_cab f left outer join tbl_client_client c<br />
&nbsp; on f.id_clipro = c.id_clave<br />
where f.status &lt;&gt; 'C' and f.fecha = '[fecha]' and f.id_entidad = [clave];</span>
<strong><br />
</strong>
</p>
<p>A partir del segundo nivel, las expresiones dentro de los códigos obedecen a columnas del nivel anterior y nunca a variables del filtro, en este caso, a columnas de la sentencia de primer nivel. Cuando se ejecuta el código principal del primer nivel, la primera linea manda los datos "1", "Facturas" y "2014-10-27" que pertenecen a las columnas "clave", "descripcion" y "fecha" (<strong> NOTA</strong>: La columna de fecha no aparece en el reporte porque está configurada como oculta, sin embargo es parte de la sentencia del código principal del primer nivel ),&nbsp; entonces, se ejecuta la sentencia anterior sustituyendo la expresión [fecha] por el valor de la columna fecha y la expresión [clave] por el valor de la columna clave, lo cual nos arroja las facturas de fecha 27 de octubre de 2014 de la entidad número 1. Al seguir con la segunda linea del primer nivel, se repetirá este mismo proceso y así hasta la última linea.</p>
<p>Justo al finalizar las lineas del segundo nivel, y antes de proseguir con la repetición del proceso, será ejecutado el <strong>código de acumulados</strong> de segundo nivel el cual se configura de la siguiente manera:<br />
</p>
<p>
<span style="color: rgb(0, 0, 255);">select coalesce(sum(subtotal), 0.0) as subtotal, coalesce(sum(iva), 0.0) as iva, coalesce(sum(total), 0.0) as total<br />
from tbl_ventas_facturas_cab <br />
where status &lt;&gt; 'C' and fecha = '[fecha]' and id_entidad = [clave];</span>
<strong><br />
</strong>
</p>
<p>Las expresiones del <strong>Código de acumulados</strong> del segundo nivel también obedecen a los datos contenidos en las columnas del primer nivel, por lo tanto las expresiones [fecha] y [clave] serán sustituidas por los datos de las columnas de fecha y clave de cada linea de la sentencia de primer nivel.</p>
<p>
<strong>NOTA MUY IMPORTANTE:</strong> Aunque forseti proporciona la posibilidad de agregar un tercer nivel que opera bajo la misma lógica del segundo nivel, no aconsejamos su desarrollo porque como se ha podido ver, la propagación de consultas crece de manera exponencial con su adición lo cual nos puede generar el bloqueo completo del servidor. Mejor que esto, un buen diseño en consultas SQL como el agregado con sentencias UNION, o el desarrollo de funciones a través de algún lenguaje de procedimientos como PL/PGSQL, nos pueden brindar resultados similares en un solo nivel, lo cual puede acelerar la carga del reporte también exponencialmente. El desarrollo de funciones y de sentencias SQL está fuera del alcance de esta documentación pero se puede revisar la documentación de PostgreSQL.</p>
<p>
<strong>4) Área de detalles del nivel.<br />
<br />
</strong>Cada vez que se presiona el botón Probar de alguno de los niveles del reporte y éste no tiene ningún error en su código principal o código de acumulados ( en caso de existir ), se crearán automáticamente en esta área cada una de las columnas resultantes de dichos códigos para poder manipular sus detalles. Estos detalles incluyen lo siguiente:&nbsp;</p>
<ul> <li>
<strong>Nombre,</strong> Dato informativo del nombre de la columna.<br />
<br />
</li> <li>
<strong>Tipo,</strong> Dato informativo del tipo de dato que contiene la columna. Este es el tipo de dato manejado por forseti y NO el tipo de dato nativo de PostgreSQL o del controlador JDBC (<span class="st"> Java Database Connectivity </span>). Estos valores pueden ser alguno de los siguientes: INT o BYTE - Valor entero general, DECIMAL o MONEY - Valor decimal general de 0 a N decimales, TIME - Valor de fecha, BOOL - Valor Verdadero o Falso y STRING - Valor alfanumérico general de 1 a N caracteres.<br />
<br />
</li> <li>
<strong>Invisible,</strong> Si se selecciona, la columna no aparecerá en el reporte y su valor de ancho y posición serán ignorados al cargarlo.<br />
<br />
</li> <li>
<strong>Formato,</strong> Es el formato que se le dará al valor de la columna al cargar este reporte, según el tipo de dato que contiene:<br />
<ul> <li>
<strong>INT o BYTE</strong><br />
<strong>#### - 0</strong>, Número sin comas mostrando 0 en valores igual a cero. Ej, 1000000.<br />
<strong>#### - _</strong>, Número sin comas sin mostrar nada en caso de valor cero.<br />
<strong>#,### - 0</strong>, Número con comas mostrando 0 en valores igual a cero. Ej, 1,000,000.<br />
<strong>#,### - _</strong>, Número con comas sin mostrar nada en caso de valor cero.</li> <li>
<strong>DECIMAL o MONEY</strong>, redondeará los decimales<br />
<strong>#,### - 0</strong>, Número sin decimales mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002<br />
<strong>#,###.# - 0</strong>, Número con un decimal mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002.2<br />
<strong>#,###.## - 0</strong>, Número con dos decimales mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002.23<br />
<strong>#,###.### - 0</strong>, Número con tres decimales mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002.235<br />
<strong>#,###.#### - 0</strong>, Número con cuatro decimales mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002.2345<br />
<strong>#,###.##### - 0</strong>, Número con cinco decimales mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002.23450<br />
<strong>#,###.###### - 0</strong>, Número con seis decimales mostrando 0 en valores igual a cero. Ej, 1002.2345 mostrará 1,002.234500<br />
<strong>#,### - _</strong>, Número sin decimales sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002<br />
<strong>#,###.# - _</strong>, Número con un decimal sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002.2<br />
<strong>#,###.## - _</strong>, Número con dos decimales sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002.23<br />
<strong>#,###.### - _</strong>, Número con tres decimales sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002.235<br />
<strong>#,###.#### - _</strong>, Número con cuatro decimales sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002.2345<br />
<strong>#,###.##### - _</strong>, Número con cinco decimales sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002.23450<br />
<strong>#,###.###### - _</strong>, Número con seis decimales sin mostrar valores igual a cero. Ej, 1002.2345 mostrará 1,002.234500</li> <li>
<strong>TIME</strong><br />
<strong>dd/mm/aa</strong>, Día, mes y año a dos dígitos Ej, 27 de Octubre de 2014 mostrará 27/10/14<br />
<strong>dd/mm/aaaa</strong>, Día, mes a dos dígitos y año a cuatro dígitos Ej, 27 de Octubre de 2014 mostrará 27/10/2014<br />
<strong>dd/mmm/aa</strong>, Día, mes abreviado y año a dos dígitos Ej, 27 de Octubre de 2014 mostrará 27/oct/14<br />
<strong>dd/mmm/aaaa</strong>, Día, mes abreviado y año a cuatro dígitos Ej, 27 de Octubre de 2014 mostrará 27/oct/2014</li> <li>
<strong>BOOL,</strong> Puede mostrar...<br />
<strong>Verdadero</strong> o <strong>Falso</strong><br />
<strong>V</strong> o <strong>F</strong><br />
<strong>SI</strong> o <strong>NO</strong><br />
<strong>1</strong> o <strong>0</strong>
</li> <li>
<strong>STRING</strong>, En caso que el dato de cadena sea una clave de cuenta contable, se podrá configurar con la separación de subcuentas y nivel, de lo contrario, se mostrará toda la cadena. </li>
</ul>
</li> <li <="" ul="">
<p>
<strong>Ancho,</strong> Es el ancho en porcentaje ( de izquierda a derecha ) que ocupará el dato de la columna en el reporte, ya sea en el papel o en la pantalla. Es importante resaltar que entre todas las columnas visibles deben ocupar el 100% de lo contrario se podría mostrar el reporte de una manera mal configurada. Por ejemplo, si el reporte tiene 10 columnas y estas ocupan 15% cada una, el total de 150% rebasa el ancho de una hoja y este reporte se imprimirá defectuosamente. Los tabuladores forman parte de este porcentaje por lo tanto si existe un tabulador de 10%, todas las columnas visibles del nivel deben sumar al máximo 90%.</p>
</li> <li <="" ul="">
<strong>Alineación,</strong> Es la alineación horizontal que ocupará el dato de la columna dentro de su porcentaje. Por lo regular, los datos de cadena como descripciones y nombres se alinean a la <strong>izquierda</strong>, los de fecha al <strong>centro</strong> y las cantidades a la <strong>derecha</strong>. Estos son los valores permitidos en un reporte.<br />
</li>
</ul>
<div align="center">
<span style="font-size: x-large;">
<strong>Errores comunes en este módulo</strong>
</span><br />
</div>
<p>Aunque para este módulo en particular los errores se deben analizar en los registros administrativos, aquí presento algunos de los errores más comunes y que no forman parte del registro porque pertenecen a errores básicamente de la interfaz de usuario.</p>
<p>
<strong>No se puede cambiar porque no existen registros de una empresa con estas claves</strong>. Este error sucede porque no se ha actualizado la interfaz después de que se eliminó una empresa, y por lo tanto no se pueden cambiar sus propiedades. <br />
</p>
<strong>No se puede cambiar o generar reportes de la empresa porque la base de datos está corrupta.</strong> Las empresas corruptas son empresas que se intentaron dar de alta en algún momento, pero el proceso falló por alguna circunstancia. El servidor deja a estas empresas en un estado erróneo y lo único que se puede y debe hacerse con ellas es eliminarlas. NOTA: Cuando una empresa se ha creado satisfactoriamente, ya nunca será marcada como empresa corrupta. En caso que falle alguna actualización sobre esta, el servidor advertirá al usuario que la empresa está en un estado "desfasada en versión" lo cual puede provocar algunos errores de versión, pero no se debe considerar como una empresa corrupta aunque es indispensable alinear el servidor.

<p>
<strong>PRECAUCION: Este proceso no se puede llevar a cabo porque en estos momentos se esta actualizando el servidor.</strong> Cuando el servidor está ejecutando una actualización bloquea los procesos como agregar, cambiar, eliminar, respaldar o restaurar empresas, para mantener alineado el servidor.<br />
</p><br />
			  

			  

                    </td>
				  </tr>
				  <tr>
					<td height="10">&nbsp;</td>
				  </tr>
				  

				</table>
			</td>
			<td width="220" valign="top"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
			    <tr>
				    
                  <td colspan="2">P&aacute;ginas en este tema:</td>
				 </tr>
                
				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040201.html" class="txtPag" target="_self"><font color="#FF6600">Servidor y Empresas</font></a><br><font color="#999999">Detalles del módulo administrativo del servidor y sus empresas</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040202.html" class="txtPag" target="_self"><font color="#FF6600">Documentación de Ayuda</font></a><br><font color="#999999">Introducción del módulo de la documentación de ayuda para el sistema Forseti</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="04020201.html" class="txtPag" target="_self"><font color="#FF6600">Menús principales</font></a><br><font color="#999999">Detalles del móudolo de menús principales para la documentación de ayuda</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="04020202.html" class="txtPag" target="_self"><font color="#FF6600">Menús secundarios</font></a><br><font color="#999999">Detalles del móudolo de menús secundarios para la documentación de ayuda</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="04020203.html" class="txtPag" target="_self"><font color="#FF6600">Páginas de Ayuda</font></a><br><font color="#999999">Detalles del móudolo de páginas de ayuda</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040203.html" class="txtPag" target="_self"><font color="#FF6600">Control SSL</font></a><br><font color="#999999">Módulo del control de certificados digitales utilizados en el servicio tomcat</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#FF6600">-</font></td>     
                    <td valign="top"><a href="040204.html" class="txtPag" target="_self"><font color="#FF6600">Administración de Roles</font></a><br><font color="#999999">Módulo para la gestón de roles de usuarios y sus permisos dentro del SAF</font></td>
				 </tr>
				

			</table>
			
			</td>
		  </tr>
		</table>

	  
	  </td>
    </tr>
    <tr> 
      <td bgcolor="#999999" height="40" valign="bottom" class="txtPie"><a href="AGPL.html" target="_self" class="txtPie">Licencia Pública General de Affero (AGPL)</a> | <a href="acerca" target="_self" class="txtPie">Sobre 
        Forseti</a><br>
        Derechos Reservados &copy; 2014 - 2015 Organización Forseti A.C. 
      </td>
    </tr>
  </table>
</div>
</body>
</html>

